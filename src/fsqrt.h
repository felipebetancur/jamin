#ifndef FSQRT_H
#define FSQRT_H

static const float fsqrt_table[256] = {
    0.00000000, 0.08838835, 0.12500000, 0.15309311, 0.17677670, 0.19764235, 
    0.21650635, 0.23385359, 0.25000000, 0.26516504, 0.27950850, 0.29315098, 
    0.30618622, 0.31868872, 0.33071891, 0.34232660, 0.35355339, 0.36443449, 
    0.37500000, 0.38527588, 0.39528471, 0.40504629, 0.41457810, 0.42389562, 
    0.43301270, 0.44194174, 0.45069391, 0.45927933, 0.46770717, 0.47598582, 
    0.48412292, 0.49212549, 0.50000000, 0.50775240, 0.51538820, 0.52291252, 
    0.53033009, 0.53764533, 0.54486237, 0.55198505, 0.55901699, 0.56596157, 
    0.57282196, 0.57960116, 0.58630197, 0.59292706, 0.59947894, 0.60595998, 
    0.61237244, 0.61871843, 0.62500000, 0.63121906, 0.63737744, 0.64347688, 
    0.64951905, 0.65550553, 0.66143783, 0.66731739, 0.67314560, 0.67892378, 
    0.68465320, 0.69033506, 0.69597055, 0.70156076, 0.70710678, 0.71260964, 
    0.71807033, 0.72348981, 0.72886899, 0.73420876, 0.73950997, 0.74477346, 
    0.75000000, 0.75519037, 0.76034532, 0.76546554, 0.77055175, 0.77560460, 
    0.78062475, 0.78561282, 0.79056942, 0.79549513, 0.80039053, 0.80525617, 
    0.81009259, 0.81490030, 0.81967982, 0.82443162, 0.82915620, 0.83385400, 
    0.83852549, 0.84317110, 0.84779125, 0.85238636, 0.85695683, 0.86150305, 
    0.86602540, 0.87052427, 0.87500000, 0.87945295, 0.88388348, 0.88829190, 
    0.89267855, 0.89704376, 0.90138782, 0.90571105, 0.91001374, 0.91429618, 
    0.91855865, 0.92280144, 0.92702481, 0.93122903, 0.93541435, 0.93958102, 
    0.94372930, 0.94785943, 0.95197164, 0.95606616, 0.96014322, 0.96420304, 
    0.96824584, 0.97227182, 0.97628121, 0.98027420, 0.98425098, 0.98821177, 
    0.99215674, 0.99608609, 1.00000000, 1.00389865, 1.00778222, 1.01165088, 
    1.01550480, 1.01934415, 1.02316910, 1.02697980, 1.03077641, 1.03455908, 
    1.03832798, 1.04208325, 1.04582503, 1.04955348, 1.05326872, 1.05697091, 
    1.06066017, 1.06433665, 1.06800047, 1.07165176, 1.07529066, 1.07891728, 
    1.08253175, 1.08613420, 1.08972474, 1.09330348, 1.09687055, 1.10042605, 
    1.10397011, 1.10750282, 1.11102430, 1.11453466, 1.11803399, 1.12152240, 
    1.12500000, 1.12846688, 1.13192314, 1.13536888, 1.13880420, 1.14222918, 
    1.14564392, 1.14904852, 1.15244306, 1.15582763, 1.15920231, 1.16256720, 
    1.16592238, 1.16926793, 1.17260394, 1.17593048, 1.17924764, 1.18255550, 
    1.18585412, 1.18914360, 1.19242400, 1.19569540, 1.19895788, 1.20221150, 
    1.20545635, 1.20869248, 1.21191996, 1.21513888, 1.21834929, 1.22155127, 
    1.22474487, 1.22793017, 1.23110723, 1.23427610, 1.23743687, 1.24058958, 
    1.24373430, 1.24687108, 1.25000000, 1.25312110, 1.25623445, 1.25934010, 
    1.26243812, 1.26552855, 1.26861145, 1.27168687, 1.27475488, 1.27781552, 
    1.28086885, 1.28391491, 1.28695377, 1.28998547, 1.29301005, 1.29602758, 
    1.29903811, 1.30204167, 1.30503831, 1.30802810, 1.31101106, 1.31398725, 
    1.31695672, 1.31991951, 1.32287566, 1.32582521, 1.32876823, 1.33170473, 
    1.33463478, 1.33755841, 1.34047566, 1.34338658, 1.34629120, 1.34918957, 
    1.35208173, 1.35496771, 1.35784756, 1.36072132, 1.36358901, 1.36645069, 
    1.36930639, 1.37215615, 1.37500000, 1.37783798, 1.38067013, 1.38349648, 
    1.38631706, 1.38913192, 1.39194109, 1.39474460, 1.39754249, 1.40033478, 
    1.40312152, 1.40590273, 1.40867846, 1.41144872
};

/* This will cark on systems without c99 lrintf support, like *BSD.
 * I'm sorry :-/ */
long int lrintf(float x);

#define f_sqrt(x) (fsqrt_table[lrintf((x) * 128.0f) & 0xff])

#endif
